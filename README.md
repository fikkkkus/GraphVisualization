
# VK API Lab6

VK API Lab6 — это проект для визуализации данных, полученных через **VK API**, с отображением пользователей и групп, а также их связей, в базе данных Neo4j. Для визуализации используется 3D-графика на базе **Three.js**. Проект также предоставляет возможность добавлять и удалять узлы, группы и связи через удобный интерфейс.

## Стек технологий

- **Three.js** — библиотека для 3D-графики.
- **Neo4j** — база данных для хранения данных о пользователях и группах.
- **FastAPI** — фреймворк для создания REST API.
- **Uvicorn** — ASGI-сервер для запуска FastAPI.

# Описание функционала VK API Lab6

## Визуализация данных

- Узлы (пользователи и группы) отображаются в виде сфер.
- Связи между узлами визуализируются в виде линий.
- Каждый тип узла имеет свой цвет:
  - **Пользователи**: нежно-фиолетовый.
  - **Группы**: оранжевый.
- Узлы распределены равномерно в 3D-пространстве.

## Работа с узлами

### Просмотр атрибутов узлов

- При клике на узел отображаются его атрибуты и связи.
- Атрибуты предыдущего узла скрываются при выборе нового.

### Добавление узлов и связей

- Можно добавить пользователей, группы и связи через модальное окно.
- Связи между узлами настраиваются через интерфейс.

### Удаление узлов

- Удаляются узлы, указанные в списке ID.

## Камера и управление

- **Камера** — PerspectiveCamera.
- **Управление камерой** через OrbitControls:
  - Вращение.
  - Масштабирование.
  - Перемещение.

## Установка и Запуск

### Шаг 1: Клонирование репозитория

Склонируйте репозиторий проекта:

```bash
git clone https://github.com/fikkkkus/vkapi-lab6
cd vkapi-lab6
```

### Шаг 2: Создание виртуального окружения

Создайте виртуальное окружение:

```bash
python3 -m venv venv
```

### Шаг 3: Активирование виртуального окружения

Активируйте виртуальное окружение:

```bash
.env\Scriptsctivate
```

### Шаг 4: Установка зависимостей

Установите все необходимые зависимости с помощью команды:

```bash
pip install -r requirements.txt
```

### Шаг 5: Установка зависимостей для 3D графики

Установите зависимости для Three.js и статических файлов:

```bash
npm install three app\static
```

### Шаг 6: Подготовка базы данных

1. Убедитесь, что установлен **Neo4j Community Edition**.
2. Остановите текущий процесс Neo4j:
   ```bash
   neo4j stop
   ```
3. Загрузите базу данных (находится в формате aligned):
   ```bash
   neo4j-admin database load neo4j --from-path="%CD%" --overwrite-destination=true
   ```
4. Запустите Neo4j:
   ```bash
   neo4j start
   ```

### Шаг 7: Запуск сервера

Запустите сервер FastAPI:

```bash
uvicorn app.main:app --reload
```

### Шаг 8: Запуск 3D-приложения

1. Откройте браузер.
2. Перейдите по адресу:
   ```
   http://127.0.0.1:8000
   ```

## Основные кнопки интерфейса

### Кнопки управления

- **Load Nodes**: Загрузка всех узлов из базы данных.
- **View Nodes from ID**: Загрузка узла по ID.
- **Add User/Group/Relation**: Открытие модального окна для добавления пользователей, групп и связей.
- **Delete Nodes**: Открытие модального окна для удаления узлов.

### Кнопки в модальных окнах

#### Модальное окно "Add User/Group/Relation":

- **Add User**: Добавляет новый узел пользователя.
- **Add Group**: Добавляет новый узел группы.
- **Add Relation**: Добавляет связь между узлами.
- **Create**: Отправляет данные о новых узлах и связях на сервер.
- **Cancel**: Закрывает окно и очищает введённые данные.

#### Модальное окно "Delete Nodes":

- **+**: Добавляет новое поле для ввода ID узла.
- **Delete**: Удаляет узлы, указанные в списке ID.
- **Cancel**: Закрывает окно и очищает введённые данные.

## Документация API

### Получение всех узлов

**HTTP-метод**: `GET`  
**URL**: `/nodes/`  
**Описание**: Возвращает список всех узлов и их связей.  

### Получение узла по ID

**HTTP-метод**: `GET`  
**URL**: `/nodes/{node_id}`  
**Описание**: Возвращает данные узла с указанным ID, включая его связи.  

### Добавление узлов и связей

**HTTP-метод**: `POST`  
**URL**: `/add/nodes/`  
**Описание**: Добавляет новые узлы и связи.  

**Пример запроса**:
```bash
curl -X POST "http://127.0.0.1:8000/add/nodes/" -H "Authorization: Bearer token" -H "Content-Type: application/json" -d '{"users": [{"id": "1"}], "groups": [{"id": "group_1"}], "relations": [{"start_id": "1", "end_id": "group_1", "type": "follow"}]}'
```

### Удаление узлов

**HTTP-метод**: `DELETE`  
**URL**: `/delete/nodes/`  
**Описание**: Удаляет узлы по указанным ID.  

**Пример запроса**:
```bash
curl -X DELETE "http://127.0.0.1:8000/delete/nodes/" -H "Authorization: "Bearer token" -H "Content-Type: application/json" -d '["1", "2"]'
```
---

